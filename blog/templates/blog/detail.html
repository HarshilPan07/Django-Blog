{% extends 'blog/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class='card m-3'>
    <h5 class='card-header'>
        {{ post.title }}
        <div class='row'>
            <div class='col'>
                <small>Posted {{ post.date_posted }} by {{ post.author }}</small>
            </div>
        </div>
    </h5>
    <div class='card-body'>
        <p>{{ post.content }}</p>
    </div>
    <div class='card-footer d-flex justify-content-end'>
            {% if user == post.author %}
                <small><a href="{% url 'update-post' post.id %}">Edit Post |</a></small>
                <small><a href="{% url 'delete-post' post.id %}">| Delete Post</a></small>
            {% endif %}
    </div>
</div>

<div>
    <div>
        <span>
            <h5>Comments</h5>
            <hr>
            <form action="#" method="POST">
                {% csrf_token %}
                {{ comment_form | crispy }}
                <button class='btn btn-primary' type="submit">Add Comment</button>
            </form>
        </span>
        <hr>
    </div>
    {% if post.comment_set.all %}
        <div class='list-group py-3'>
            {% for comment in post.comment_set.all %}
            <a href="#" class='list-group-item list-group-item-action'>
                <div>
                    <h5>{{ comment.content }}</h5>
                    <small>Posted by {{ comment.commenter }} on {{ comment.date_posted }}</small>
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
        <div class='jumbotron m-3'>
            <h3 class='display-4'>Looks like there aren't any comments here!</h3>
            <div class='border-top pt-3'>
                <small class='text-muted'>Click "Add Comment" above to add a new comment.</small>
            </div>
        </div>
    {% endif %}
</div>
{% endblock content %}